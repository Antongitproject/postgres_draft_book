# Использование clusterdb в PostgreSQL
clusterdb — это командная утилита PostgreSQL, предназначенная для перестроения индексов и таблиц в базе данных с целью оптимизации их физического расположения на диске. Эта операция может улучшить производительность запросов, особенно для последовательного сканирования таблиц.

!!! info "Основное назначение"
    clusterdb используется для выполнения команды CLUSTER в PostgreSQL. Эта команда перестраивает таблицы на основе заданного индекса, что может улучшить производительность запросов, которые используют этот индекс.

Синтаксис команды
clusterdb [option...] [dbname]

## Основные параметры:

-a, --all
Перестроить все базы данных в кластере.

-d, --dbname=DBNAME
Имя базы данных, которую необходимо перестроить.

-e, --echo
Показать выполняемые SQL команды.

-q, --quiet
Не показывать прогресс выполнения.

-t, --table=TABLE
Имя таблицы для перестройки. Можно использовать формат schema.table для указания схемы.

-v, --verbose
Показать подробную информацию о выполнении команды.

-V, --version
Показать версию clusterdb.

-?, --help
Показать справку по использованию команды.

## Примеры использования
Перестроить конкретную таблицу в базе данных
clusterdb -d mydatabase -t mytable
Эта команда перестроит таблицу mytable в базе данных mydatabase.

Перестроить все таблицы в базе данных
clusterdb -d mydatabase
Эта команда перестроит все таблицы в базе данных mydatabase.

Перестроить все базы данных в кластере
clusterdb -a
Эта команда перестроит все таблицы во всех базах данных кластера.

Перестроить таблицу в определенной схеме
clusterdb -d mydatabase -t myschema.mytable
Эта команда перестроит таблицу mytable в схеме myschema в базе данных mydatabase.

Использовать подробный вывод
clusterdb -d mydatabase -v
Эта команда перестроит все таблицы в базе данных mydatabase и покажет подробную информацию о выполнении команды.

## Примечание
Перестройка таблиц может занять значительное время и потребовать большого объема дискового пространства.
Выполнение команды clusterdb блокирует таблицы, что может привести к временной недоступности таблиц для других операций.
clusterdb может быть запущен как из командной строки операционной системы, так и в виде SQL команды CLUSTER внутри PostgreSQL.

## Полезные ссылки
https://www.postgresql.org/docs/current/app-clusterdb.html
https://www.postgresql.org/docs/current/sql-cluster.html

Команда CLUSTER в PostgreSQL
Использование clusterdb помогает оптимизировать производительность запросов, улучшая физическое расположение данных на диске. Это особенно полезно для больших таблиц с часто используемыми индексами.